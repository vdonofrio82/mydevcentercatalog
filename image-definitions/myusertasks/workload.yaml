# This file is used to define a MS DevBox image definition for testing purposes.
$schema: "1.0"
# The name is used to identify the image definition.
name: "myusertask-dev"
# The image is the technical base image name used for the DevBox. On top of this image, additional tools will be installed.
image: microsoftvisualstudio_visualstudioplustools_vs-2022-ent-general-win11-m365-gen2
# The description provides a brief overview of the image definition.
description: "This definition is for testing the team configuration in MS DevBox"
# The tasks section contains a list of tasks to be executed in background during the DevBox provisioning.
tasks:

# The following  task is used for installing applications via PowerShell script.
  - name: powershell
    description: Install Docker Desktop
    parameters:
      command: |
        # Enable WSL 2 and install Docker Desktop
        dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
        dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all
        Invoke-WebRequest -Uri 'https://desktop.docker.com/win/stable/Docker%20Desktop%20Installer.exe' -OutFile 'DockerDesktopInstaller.exe'
        Start-Process -Wait -FilePath '.\DockerDesktopInstaller.exe' -ArgumentList 'install', '--quiet'
        Remove-Item '.\DockerDesktopInstaller.exe'

  # Many other tasks can be added here as needed, such as installing additional tools or configuring settings.