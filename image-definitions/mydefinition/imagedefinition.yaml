# This file is used to define a MS DevBox image definition configuration for testing purposes.
# Tools: VSCode, Azure Storage Explorer, SQL Server Management Studio, OpenVPN, and Docker Desktop.

$schema: "1.0"
# The name is used to identify the image definition.
name: "mytest-dev"
# The image is the technical base image name used for the DevBox. On top of this image, additional tools will be installed.
image: microsoftvisualstudio_visualstudioplustools_vs-2022-ent-general-win11-m365-gen2
# The description provides a brief overview of the image definition.
description: "This definition is for testing the team configuration in MS DevBox"
# The tasks section contains a list of tasks to be executed in background during the DevBox provisioning.
tasks:
# The following tasks are used for installing applications from the Windows Package Manager without user context.
  
  - name: winget
    description: Install VSCode
    parameters:
      package:  Microsoft.VisualStudioCode
  
  - name: winget
    description: Install Azure Storage Explorer
    parameters:
      package:  Microsoft.Azure.StorageExplorer
  
  - name: winget
    description: Install SQL Server Management Studio
    parameters:
      package:  Microsoft.SQLServerManagementStudio
  
  - name: winget
    description: Install OpenVPN
    parameters:
      package:  OpenVPNTechnologies.OpenVPN
  
  - name: winget
    description: Install Podman
    parameters:
      package:  RedHat.Podman
  
  # The following task is an example of a PowerShell command for setting environment variables
  - name: powershell
    parameters:
      command: |
        $env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User')

userTasks:
# The following tasks are used for installing applications from the Windows Package Manager in user context.
  - name: winget
    description: Install Postman
    parameters:
      package:  Postman.Postman
  
  # Many other tasks can be added here as needed, such as installing additional tools or configuring settings.